(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{51:function(e,t,n){e.exports=n(97)},56:function(e,t,n){},93:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(18),o=n.n(r),l=(n(56),n(7)),s=n(8),c=n(11),m=n(9),u=n(10),g=n(101),d=n(42),f=n.n(d),h=n(4),y=n.n(h),p=n(20),v=n(21);function b(){var e=Object(p.a)(["\n  background-color: black;\n  border-radius: 50%;\n  width: 10px;\n  height: 10px;\n  margin: 0 5px;\n  /* Animation */\n  animation: "," 0.5s linear infinite;\n  animation-delay: ",";\n"]);return b=function(){return e},e}function w(){var e=Object(p.a)(["\n  display: flex;\n  align-items: flex-end;\n"]);return w=function(){return e},e}function E(){var e=Object(p.a)(["\n  0% { margin-bottom: 0; }\n  50% { margin-bottom: 15px }\n  100% { margin-bottom: 0 }\n"]);return E=function(){return e},e}var x=Object(v.b)(E()),O=v.a.div(w()),k=v.a.div(b(),x,function(e){return e.delay}),P=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(O,null,i.a.createElement(k,{delay:"0s"}),i.a.createElement(k,{delay:".1s"}),i.a.createElement(k,{delay:".2s"}))}}]),t}(a.Component),j=new f.a,_=function(e){function t(){var e;Object(l.a)(this,t);var n=(e=Object(c.a)(this,Object(m.a)(t).call(this))).getHashParams(),a=n.access_token;return a&&j.setAccessToken(a),e.state={loggedIn:!!a,nowPlaying:{name:"Nothing is playing",albumArt:"",lyrics:[],time_left:0,total_time:0}},console.log(n),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"getHashParams",value:function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);for(e=n.exec(a);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(a);return t}},{key:"hasChanged",value:function(){var e=this;j.getMyCurrentPlaybackState().then(function(t){if(t.is_playing)if(console.log(t),console.log(t.item.name),console.log(e.state.nowPlaying.name),t.item.name.valueOf()!==e.state.nowPlaying.name.valueOf())e.getNowPlaying(),e.setState({nowPlaying:{name:t.item.name,artist:t.item.artists[0].name,albumArt:"undefined"===typeof t.item.album?t.item.album.images[0].url:"",total_time:t.item.duration_ms,time_left:t.item.duration_ms-t.progress_ms,lyrics:[]}});else{var n=e.state.nowPlaying,a=n.name,i=n.artist,r=n.total_time,o=n.lyrics;e.setState({nowPlaying:{name:a,artist:i,albumArt:"undefined"!==typeof t.item.album?t.item.album.images[0].url:"",total_time:r,time_left:t.item.duration_ms-t.progress_ms,lyrics:o}})}else{var l=e.state.nowPlaying,s=l.artist,c=l.albumArt,m=l.total_time,u=l.lyrics;e.setState({nowPlaying:{name:"Nothing is Playing",artist:s,albumArt:c,total_time:m,time_left:0,lyrics:u}})}})}},{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){return e.hasChanged()},3e3),y()(document).on("mousemove",function(e){y()(".light").css({left:e.pageX-300,top:e.pageY-300})});var t=y()(".js-tilt-container");t.on("mousemove",function(e){var t=y()(this).offset(),n=t.left,a=t.top,i=e.pageX-n,r=e.pageY-a,o=y()(this).width()/2-i,l=y()(this).height()/2-r;y()(this).css("transform","perspective(500px) rotateX("+l/40+"deg) rotateY("+-o/40+"deg) translateZ(10px)");var s=Math.sign(o)>0?-Math.abs(o):Math.abs(o);y()(this).find(".js-perspective-neg").css("transform","translateY("+l/10+"px) translateX("+-s/10+"px) scale(1.15)"),y()(this).removeClass("leave")}),t.on("mouseleave",function(){y()(this).addClass("leave")})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"getNowPlaying",value:function(){var e=this;j.getMyCurrentPlaybackState().then(function(t){var n=t.item.artists[0].name.replace(/[^\w\s]/g,"");t.item.artists[1]&&(n=n+" "+t.item.artists[1].name.replace(/[^\w\s]/g,"")),console.log(t),console.log(n);var a=t.item.name.split("(")[0];console.log(a),a=(a=(a=(a=(a=t.item.name.replace(/[^\w\s]/g,"")).split(" ")).slice(0,5)).join("%20")).replace(",","%20"),console.log(a);var i="http://ariczhuang.ddns.net:8888/get_lyrics/?artist="+a+"&name="+n.replace(" ","%20");fetch(i).then(function(e){return e.json()}).then(function(n){var a=n.lyrics.song_lyrics.split("\n");e.setState({nowPlaying:{name:t.item.name,artist:t.item.artists[0].name,albumArt:"undefined"!==typeof t.item.album?t.item.album.images[0].url:"",total_time:t.item.duration_ms,time_left:t.item.duration_ms-t.progress_ms,lyrics:a}})}).catch(function(e){return console.log("lyrical error:"+e)})}).catch(function(e){return console.log("There was an error:"+e)})}},{key:"render",value:function(){var e=this,t=this.state.nowPlaying.lyrics.map(function(e){return""===e?i.a.createElement("br",{key:e.uniqueId}):i.a.createElement("div",{key:e.uniqueId},e)});return i.a.createElement("div",{className:"Lyrics"},this.state.loggedIn&&i.a.createElement(i.a.Fragment,null," ",i.a.createElement("input",{id:"mycheckbox",onClick:function(){return e.getNowPlaying()},type:"checkbox"}),i.a.createElement("label",{htmlFor:"mycheckbox"})),!this.state.loggedIn&&i.a.createElement("a",{href:"http://ariczhuang.ddns.net:8888/login"},"Connect your Spotify"),i.a.createElement("div",null,this.state.nowPlaying.name,i.a.createElement("div",{style:{width:"300px",margin:"auto"}},i.a.createElement(g.a,{active:!0,striped:!0,bsStyle:"info",now:Math.floor(100*(1-this.state.nowPlaying.time_left/this.state.nowPlaying.total_time))}))),i.a.createElement("div",null,i.a.createElement("div",{className:"image-shadow js-tilt-container",style:{backgroundImage:"url("+this.state.nowPlaying.albumArt+")"}},i.a.createElement("br",null),i.a.createElement("br",null))),i.a.createElement("div",null,t===[]?i.a.createElement(P,null):t),i.a.createElement("br",null))}}]),t}(a.Component),A=n(13),C=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).play=e.play.bind(Object(A.a)(Object(A.a)(e))),e.host="ariczhuang.ddns.net:80",e.state={isPlaying:!1,icon:"fa fa-play fa-2x",marginLeft:"12px"},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"setDevice",value:function(){var e;return-1!==(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?alert("Opera"):-1!==navigator.userAgent.indexOf("Chrome")?e=1.45:-1!==navigator.userAgent.indexOf("Safari")?e=0:-1!==navigator.userAgent.indexOf("Firefox")?e=0:-1<navigator.userAgent.indexOf("Edge")?e=0:-1!==navigator.userAgent.indexOf("MSIE")||1===!!document.documentMode?alert("IE"):alert("unknown"),console.log(e),e}},{key:"play",value:function(){if(this.state.isPlaying){(e=document.getElementById("background")).pause(),e.src="",this.setState({isPlaying:!1,icon:"fa fa-play fa-2x",marginLeft:"12px"})}else{var e=document.getElementById("background");console.log(this),e.src="http://"+this.host+"/stream",e.currentTime=this.setDevice(),e.play(),this.setState({isPlaying:!0,icon:"fa fa-pause fa-2x",marginLeft:"0px"})}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"a"},i.a.createElement("audio",{id:"background"},i.a.createElement("source",{src:"",preload:"none",type:"audio/mpeg"})),i.a.createElement("button",{className:"round-button",id:"player",onClick:function(){return e.play()}},i.a.createElement("i",{className:this.state.icon,style:{fontSize:"100px",marginLeft:this.state.marginLeft}})))}}]),t}(a.Component),I=n(103),S=n(102),N=n(100),M=(n(93),function(){return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(N.a,{style:{textDecoration:"none",width:"150px"},className:"button",to:"/lyrics"},"My Lyrics"),i.a.createElement("br",null),i.a.createElement(N.a,{style:{textDecoration:"none",width:"150px"},className:"button",to:"/stream"},"Radio Stream"))}),L=function(){return i.a.createElement(I.a,null,i.a.createElement("div",null,i.a.createElement(M,null),i.a.createElement(S.a,{exact:!0,path:"/",component:_}),i.a.createElement(S.a,{path:"/lyrics",component:_}),i.a.createElement(S.a,{path:"/stream",component:C})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[51,2,1]]]);
//# sourceMappingURL=main.1768df20.chunk.js.map